{% extends "layout.html" %}

{% block content %}
{% if session.get('user_id') %}
<div class="profile-shortcut-container">
  <div class="profile-shortcut-avatar-wrapper" onclick="toggleShortcutPanel(event)">
    {% if get_avatar_url() %}
      <img src="{{ url_for('static', filename=get_avatar_url()) }}" alt="Profil" class="profile-shortcut-avatar">
    {% else %}
      <div class="profile-shortcut-placeholder">{{ get_user_data().username[0]|upper }}</div>
    {% endif %}
  </div>
  <div class="profile-shortcut-panel" id="shortcutPanel">
    <div class="shortcut-panel-item">
      <a href="{{ url_for('profile_v2') }}">
        <i class="fas fa-user-circle"></i>
        <span>Profilim</span>
      </a>
    </div>
    <div class="shortcut-panel-divider"></div>
    <div class="shortcut-panel-item">
      <a href="{{ url_for('logout') }}">
        <i class="fas fa-sign-out-alt"></i>
        <span>Çıkış Yap</span>
      </a>
    </div>
  </div>
</div>
{% endif %}

<section class="hero-section">
<div class="row align-items-center">
<div class="col-lg-12 text-center position-relative">
<div class="card">
  <h1 class="hero-title"><span>Zekânı Geliştir</span><span>IQ'nu Yükselt</span></h1>
  <p class="hero-subtitle">Bilişsel yeteneklerini geliştiren beyin egzersizi oyunlarımızla kendini zorla.</p>
  <div class="d-flex justify-content-center flex-wrap">
    <a href="{{ url_for('word_puzzle') }}" class="btn btn-primary me-2 mb-2">Hemen Başla</a>
    <a href="{{ url_for('articles') }}" class="btn btn-outline-primary mb-2">Detaylar</a>
  </div>
</div>
</div>
</div>
</section>

{% if session.get('user_id') and favorite_games %}
<section class="mt-4">
<h2 class="text-center mb-3">Favori Oyunlarınız</h2>
<div class="game-grid favorite-games">
  {% for game_type in favorite_games %}
    {% if game_type == "wordPuzzle" %}
    <div class="game-card">
      <div class="game-icon"><i class="fas fa-font"></i></div>
      <div class="game-info">
        <h3>Kelime Bulmaca</h3>
        <p>Kelimeleri bul, sözcük hazineni genişlet.</p>
      </div>
      <a href="{{ url_for('word_puzzle') }}" class="game-btn">Oyna</a>
      <button class="favorite-btn active" data-game="wordPuzzle"><i class="fas fa-star"></i></button>
    </div>
    {% elif game_type == "memoryCards" %}
    <div class="game-card">
      <div class="game-icon"><i class="fas fa-clone"></i></div>
      <div class="game-info">
        <h3>Hafıza Kartları</h3>
        <p>Eşleşen kartları bul ve hafızanı test et.</p>
      </div>
      <a href="{{ url_for('memory_cards') }}" class="game-btn">Oyna</a>
      <button class="favorite-btn active" data-game="memoryCards"><i class="fas fa-star"></i></button>
    </div>
    {% elif game_type == "labyrinth" %}
    <div class="game-card">
      <div class="game-icon"><i class="fas fa-route"></i></div>
      <div class="game-info">
        <h3>Labirent</h3>
        <p>Çıkış yolunu bul ve stratejik düşün.</p>
      </div>
      <a href="{{ url_for('labyrinth') }}" class="game-btn">Oyna</a>
      <button class="favorite-btn active" data-game="labyrinth"><i class="fas fa-star"></i></button>
    </div>
    {% elif game_type == "puzzle" %}
    <div class="game-card">
      <div class="game-icon"><i class="fas fa-puzzle-piece"></i></div>
      <div class="game-info">
        <h3>Yapboz</h3>
        <p>Parçaları birleştir ve görsel zekânı geliştir.</p>
      </div>
      <a href="{{ url_for('puzzle') }}" class="game-btn">Oyna</a>
      <button class="favorite-btn active" data-game="puzzle"><i class="fas fa-star"></i></button>
    </div>
    {% elif game_type == "numberSequence" %}
    <div class="game-card">
      <div class="game-icon"><i class="fas fa-sort-numeric-up"></i></div>
      <div class="game-info">
        <h3>Sayı Dizisi</h3>
        <p>Sayı örüntülerini keşfet ve analitik düşün.</p>
      </div>
      <a href="{{ url_for('number_sequence') }}" class="game-btn">Oyna</a>
      <button class="favorite-btn active" data-game="numberSequence"><i class="fas fa-star"></i></button>
    </div>
    {% elif game_type == "numberChain" %}
    <div class="game-card">
      <div class="game-icon"><i class="fas fa-link"></i></div>
      <div class="game-info">
        <h3>Sayı Zinciri</h3>
        <p>Gördüğün sayıları doğru sırayla hatırla.</p>
      </div>
      <a href="{{ url_for('number_chain') }}" class="game-btn">Oyna</a>
      <button class="favorite-btn active" data-game="numberChain"><i class="fas fa-star"></i></button>
    </div>
    {% elif game_type == "audioMemory" %}
    <div class="game-card">
      <div class="game-icon"><i class="fas fa-volume-up"></i></div>
      <div class="game-info">
        <h3>Sesli Hafıza</h3>
        <p>Duyduğun ses sıralamasını doğru tekrarla.</p>
      </div>
      <a href="{{ url_for('audio_memory') }}" class="game-btn">Oyna</a>
      <button class="favorite-btn active" data-game="audioMemory"><i class="fas fa-star"></i></button>
    </div>
    {% elif game_type == "nBack" %}
    <div class="game-card">
      <div class="game-icon"><i class="fas fa-brain"></i></div>
      <div class="game-info">
        <h3>N-Back Test</h3>
        <p>Çalışma belleğini ve odaklanma gücünü test et.</p>
      </div>
      <a href="{{ url_for('n_back') }}" class="game-btn">Oyna</a>
      <button class="favorite-btn active" data-game="nBack"><i class="fas fa-star"></i></button>
    </div>
    {% elif game_type == "chess" %}
    <div class="game-card">
      <div class="game-icon"><i class="fas fa-chess"></i></div>
      <div class="game-info">
        <h3>Satranç</h3>
        <p>Stratejik düşünme ve planlama becerilerinizi geliştirin.</p>
      </div>
      <a href="{{ url_for('chess') }}" class="game-btn">Oyna</a>
      <button class="favorite-btn active" data-game="chess"><i class="fas fa-star"></i></button>
    </div>
    {% elif game_type == "sudoku" %}
    <div class="game-card">
      <div class="game-icon"><i class="fas fa-th"></i></div>
      <div class="game-info">
        <h3>Sudoku</h3>
        <p>Her satır, sütun ve bölgede 1-9 arası rakamları yerleştirerek mantık gücünüzü geliştirin.</p>
      </div>
      <a href="{{ url_for('sudoku') }}" class="game-btn">Oyna</a>
      <button class="favorite-btn active" data-game="sudoku"><i class="fas fa-star"></i></button>
    </div>
    {% elif game_type == "3dRotation" %}
    <div class="game-card">
      <div class="game-icon"><i class="fas fa-cube"></i></div>
      <div class="game-info">
        <h3>3D Döndürme</h3>
        <p>3D şekilleri doğru açılarla döndürerek uzamsal algı yeteneklerinizi geliştirin.</p>
      </div>
      <a href="{{ url_for('three_d_rotation') }}" class="game-btn">Oyna</a>
      <button class="favorite-btn active" data-game="3dRotation"><i class="fas fa-star"></i></button>
    </div>
    {% endif %}
  {% endfor %}
</div>
</section>
{% elif most_played_games %}
<section class="mt-4">
<h2 class="text-center mb-3">En Çok Oynanan Oyunlar</h2>
<div class="game-grid popular-games">
  {% for game_type in most_played_games %}
    {% if game_type == "wordPuzzle" %}
    <div class="game-card">
      <div class="game-icon"><i class="fas fa-font"></i></div>
      <div class="game-info">
        <h3>Kelime Bulmaca</h3>
        <p>Kelimeleri bul, sözcük hazineni genişlet.</p>
      </div>
      <a href="{{ url_for('word_puzzle') }}" class="game-btn">Oyna</a>
      {% if session.get('user_id') %}
      <button class="favorite-btn" data-game="wordPuzzle"><i class="far fa-star"></i></button>
      {% endif %}
    </div>
    {% elif game_type == "memoryCards" or game_type == "memoryMatch" %}
    <div class="game-card">
      <div class="game-icon"><i class="fas fa-clone"></i></div>
      <div class="game-info">
        <h3>Hafıza Kartları</h3>
        <p>Eşleşen kartları bul ve hafızanı test et.</p>
      </div>
      <a href="{{ url_for('memory_cards') }}" class="game-btn">Oyna</a>
      {% if session.get('user_id') %}
      <button class="favorite-btn" data-game="memoryCards"><i class="far fa-star"></i></button>
      {% endif %}
    </div>
    {% elif game_type == "labyrinth" %}
    <div class="game-card">
      <div class="game-icon"><i class="fas fa-route"></i></div>
      <div class="game-info">
        <h3>Labirent</h3>
        <p>Çıkış yolunu bul ve stratejik düşün.</p>
      </div>
      <a href="{{ url_for('labyrinth') }}" class="game-btn">Oyna</a>
      {% if session.get('user_id') %}
      <button class="favorite-btn" data-game="labyrinth"><i class="far fa-star"></i></button>
      {% endif %}
    </div>
    {% elif game_type == "puzzle" %}
    <div class="game-card">
      <div class="game-icon"><i class="fas fa-puzzle-piece"></i></div>
      <div class="game-info">
        <h3>Yapboz</h3>
        <p>Parçaları birleştir ve görsel zekânı geliştir.</p>
      </div>
      <a href="{{ url_for('puzzle') }}" class="game-btn">Oyna</a>
      {% if session.get('user_id') %}
      <button class="favorite-btn" data-game="puzzle"><i class="far fa-star"></i></button>
      {% endif %}
    </div>
    {% elif game_type == "numberSequence" %}
    <div class="game-card">
      <div class="game-icon"><i class="fas fa-sort-numeric-up"></i></div>
      <div class="game-info">
        <h3>Sayı Dizisi</h3>
        <p>Sayı örüntülerini keşfet ve analitik düşün.</p>
      </div>
      <a href="{{ url_for('number_sequence') }}" class="game-btn">Oyna</a>
      {% if session.get('user_id') %}
      <button class="favorite-btn" data-game="numberSequence"><i class="far fa-star"></i></button>
      {% endif %}
    </div>
    {% elif game_type == "numberChain" %}
    <div class="game-card">
      <div class="game-icon"><i class="fas fa-link"></i></div>
      <div class="game-info">
        <h3>Sayı Zinciri</h3>
        <p>Gördüğün sayıları doğru sırayla hatırla.</p>
      </div>
      <a href="{{ url_for('number_chain') }}" class="game-btn">Oyna</a>
      {% if session.get('user_id') %}
      <button class="favorite-btn" data-game="numberChain"><i class="far fa-star"></i></button>
      {% endif %}
    </div>
    {% elif game_type == "audioMemory" %}
    <div class="game-card">
      <div class="game-icon"><i class="fas fa-volume-up"></i></div>
      <div class="game-info">
        <h3>Sesli Hafıza</h3>
        <p>Duyduğun ses sıralamasını doğru tekrarla.</p>
      </div>
      <a href="{{ url_for('audio_memory') }}" class="game-btn">Oyna</a>
      {% if session.get('user_id') %}
      <button class="favorite-btn" data-game="audioMemory"><i class="far fa-star"></i></button>
      {% endif %}
    </div>
    {% elif game_type == "nBack" %}
    <div class="game-card">
      <div class="game-icon"><i class="fas fa-brain"></i></div>
      <div class="game-info">
        <h3>N-Back Test</h3>
        <p>Çalışma belleğini ve odaklanma gücünü test et.</p>
      </div>
      <a href="{{ url_for('n_back') }}" class="game-btn">Oyna</a>
      {% if session.get('user_id') %}
      <button class="favorite-btn" data-game="nBack"><i class="far fa-star"></i></button>
      {% endif %}
    </div>
    {% elif game_type == "chess" %}
    <div class="game-card">
      <div class="game-icon"><i class="fas fa-chess"></i></div>
      <div class="game-info">
        <h3>Satranç</h3>
        <p>Stratejik düşünme ve planlama becerilerinizi geliştirin.</p>
      </div>
      <a href="{{ url_for('chess') }}" class="game-btn">Oyna</a>
      {% if session.get('user_id') %}
      <button class="favorite-btn" data-game="chess"><i class="far fa-star"></i></button>
      {% endif %}
    </div>
    {% elif game_type == "sudoku" %}
    <div class="game-card">
      <div class="game-icon"><i class="fas fa-th"></i></div>
      <div class="game-info">
        <h3>Sudoku</h3>
        <p>Her satır, sütun ve bölgede 1-9 arası rakamları yerleştirerek mantık gücünüzü geliştirin.</p>
      </div>
      <a href="{{ url_for('sudoku') }}" class="game-btn">Oyna</a>
      {% if session.get('user_id') %}
      <button class="favorite-btn" data-game="sudoku"><i class="far fa-star"></i></button>
      {% endif %}
    </div>
    {% elif game_type == "3dRotation" %}
    <div class="game-card">
      <div class="game-icon"><i class="fas fa-cube"></i></div>
      <div class="game-info">
        <h3>3D Döndürme</h3>
        <p>3D şekilleri doğru açılarla döndürerek uzamsal algı yeteneklerinizi geliştirin.</p>
      </div>
      <a href="{{ url_for('three_d_rotation') }}" class="game-btn">Oyna</a>
      {% if session.get('user_id') %}
      <button class="favorite-btn" data-game="3dRotation"><i class="far fa-star"></i></button>
      {% endif %}
    </div>
    {% endif %}
  {% endfor %}
</div>
</section>
{% endif %}

<section class="mt-4">
<h2 class="text-center mb-3">Tüm Beyin Egzersizi Oyunları</h2>
<div class="game-grid">
  <!-- Kelime Bulmaca -->
  <div class="game-card">
    <div class="game-icon"><i class="fas fa-font"></i></div>
    <div class="game-info">
      <h3>Kelime Bulmaca</h3>
      <p>Kelimeleri bul, sözcük hazineni genişlet.</p>
    </div>
    <a href="{{ url_for('word_puzzle') }}" class="game-btn">Oyna</a>
    {% if session.get('user_id') %}
    <button class="favorite-btn {% if favorite_games and 'wordPuzzle' in favorite_games %}active{% endif %}" data-game="wordPuzzle">
      <i class="{% if favorite_games and 'wordPuzzle' in favorite_games %}fas{% else %}far{% endif %} fa-star"></i>
    </button>
    {% endif %}
  </div>

  <!-- Hafıza Kartları -->
  <div class="game-card">
    <div class="game-icon"><i class="fas fa-clone"></i></div>
    <div class="game-info">
      <h3>Hafıza Kartları</h3>
      <p>Eşleşen kartları bul ve hafızanı test et.</p>
    </div>
    <a href="{{ url_for('memory_cards') }}" class="game-btn">Oyna</a>
    {% if session.get('user_id') %}
    <button class="favorite-btn {% if favorite_games and 'memoryCards' in favorite_games %}active{% endif %}" data-game="memoryCards">
      <i class="{% if favorite_games and 'memoryCards' in favorite_games %}fas{% else %}far{% endif %} fa-star"></i>
    </button>
    {% endif %}
  </div>

  <!-- Labirent -->
  <div class="game-card">
    <div class="game-icon"><i class="fas fa-route"></i></div>
    <div class="game-info">
      <h3>Labirent</h3>
      <p>Çıkış yolunu bul ve stratejik düşün.</p>
    </div>
    <a href="{{ url_for('labyrinth') }}" class="game-btn">Oyna</a>
    {% if session.get('user_id') %}
    <button class="favorite-btn {% if favorite_games and 'labyrinth' in favorite_games %}active{% endif %}" data-game="labyrinth">
      <i class="{% if favorite_games and 'labyrinth' in favorite_games %}fas{% else %}far{% endif %} fa-star"></i>
    </button>
    {% endif %}
  </div>

  <!-- Yapboz -->
  <div class="game-card">
    <div class="game-icon"><i class="fas fa-puzzle-piece"></i></div>
    <div class="game-info">
      <h3>Yapboz</h3>
      <p>Parçaları birleştir ve görsel zekânı geliştir.</p>
    </div>
    <a href="{{ url_for('puzzle') }}" class="game-btn">Oyna</a>
    {% if session.get('user_id') %}
    <button class="favorite-btn {% if favorite_games and 'puzzle' in favorite_games %}active{% endif %}" data-game="puzzle">
      <i class="{% if favorite_games and 'puzzle' in favorite_games %}fas{% else %}far{% endif %} fa-star"></i>
    </button>
    {% endif %}
  </div>

  <!-- Görsel Dikkat oyunu kaldırıldı
  <div class="game-card" style="display: none;">
    <div class="game-icon"><i class="fas fa-eye"></i></div>
    <div class="game-info">
      <h3>Görsel Dikkat</h3>
      <p>Örüntüleri bul ve dikkatini test et.</p>
    </div>
    <a href="#" class="game-btn">Oyna</a>
  </div>
  -->

  <!-- Sayı Dizisi -->
  <div class="game-card">
    <div class="game-icon"><i class="fas fa-sort-numeric-up"></i></div>
    <div class="game-info">
      <h3>Sayı Dizisi</h3>
      <p>Sayı örüntülerini keşfet ve analitik düşün.</p>
    </div>
    <a href="{{ url_for('number_sequence') }}" class="game-btn">Oyna</a>
    {% if session.get('user_id') %}
    <button class="favorite-btn {% if favorite_games and 'numberSequence' in favorite_games %}active{% endif %}" data-game="numberSequence">
      <i class="{% if favorite_games and 'numberSequence' in favorite_games %}fas{% else %}far{% endif %} fa-star"></i>
    </button>
    {% endif %}
  </div>

  <!-- Kim Nerede? oyunu kaldırıldı -->

  <!-- Kart Eşleme oyunu kaldırıldı -->
  <!--
  <div class="game-card">
    <div class="game-icon"><i class="fas fa-th"></i></div>
    <div class="game-info">
      <h3>Kart Eşleme</h3>
      <p>İkonları eşleştir ve görsel hafızanı geliştir.</p>
    </div>
    <a href="{{ url_for('memory_cards') }}" class="game-btn">Oyna</a>
  </div>
  -->

  <!-- Sayı Zinciri -->
  <div class="game-card">
    <div class="game-icon"><i class="fas fa-link"></i></div>
    <div class="game-info">
      <h3>Sayı Zinciri</h3>
      <p>Gördüğün sayıları doğru sırayla hatırla.</p>
    </div>
    <a href="{{ url_for('number_chain') }}" class="game-btn">Oyna</a>
    {% if session.get('user_id') %}
    <button class="favorite-btn {% if favorite_games and 'numberChain' in favorite_games %}active{% endif %}" data-game="numberChain">
      <i class="{% if favorite_games and 'numberChain' in favorite_games %}fas{% else %}far{% endif %} fa-star"></i>
    </button>
    {% endif %}
  </div>

  <!-- Sesli Hafıza -->
  <div class="game-card">
    <div class="game-icon"><i class="fas fa-volume-up"></i></div>
    <div class="game-info">
      <h3>Sesli Hafıza</h3>
      <p>Duyduğun ses sıralamasını doğru tekrarla.</p>
    </div>
    <a href="{{ url_for('audio_memory') }}" class="game-btn">Oyna</a>
    {% if session.get('user_id') %}
    <button class="favorite-btn {% if favorite_games and 'audioMemory' in favorite_games %}active{% endif %}" data-game="audioMemory">
      <i class="{% if favorite_games and 'audioMemory' in favorite_games %}fas{% else %}far{% endif %} fa-star"></i>
    </button>
    {% endif %}
  </div>

  <!-- N-Back Test -->
  <div class="game-card">
    <div class="game-icon"><i class="fas fa-brain"></i></div>
    <div class="game-info">
      <h3>N-Back Test</h3>
      <p>Çalışma belleğini ve odaklanma gücünü test et.</p>
    </div>
    <a href="{{ url_for('n_back') }}" class="game-btn">Oyna</a>
    {% if session.get('user_id') %}
    <button class="favorite-btn {% if favorite_games and 'nBack' in favorite_games %}active{% endif %}" data-game="nBack">
      <i class="{% if favorite_games and 'nBack' in favorite_games %}fas{% else %}far{% endif %} fa-star"></i>
    </button>
    {% endif %}
  </div>

  <!-- Satranç -->
  <div class="game-card">
    <div class="game-icon"><i class="fas fa-chess"></i></div>
    <div class="game-info">
      <h3>Satranç</h3>
      <p>Stratejik düşünme ve planlama becerilerinizi geliştirin.</p>
    </div>
    <a href="{{ url_for('chess') }}" class="game-btn">Oyna</a>
    {% if session.get('user_id') %}
    <button class="favorite-btn {% if favorite_games and 'chess' in favorite_games %}active{% endif %}" data-game="chess">
      <i class="{% if favorite_games and 'chess' in favorite_games %}fas{% else %}far{% endif %} fa-star"></i>
    </button>
    {% endif %}
  </div>
  
  <!-- Sudoku -->
  <div class="game-card">
    <div class="game-icon"><i class="fas fa-th"></i></div>
    <div class="game-info">
      <h3>Sudoku</h3>
      <p>Her satır, sütun ve bölgede 1-9 arası rakamları yerleştirerek mantık gücünüzü geliştirin.</p>
    </div>
    <a href="{{ url_for('sudoku') }}" class="game-btn">Oyna</a>
    {% if session.get('user_id') %}
    <button class="favorite-btn {% if favorite_games and 'sudoku' in favorite_games %}active{% endif %}" data-game="sudoku">
      <i class="{% if favorite_games and 'sudoku' in favorite_games %}fas{% else %}far{% endif %} fa-star"></i>
    </button>
    {% endif %}
  </div>

  <!-- 3D Döndürme -->
  <div class="game-card">
    <div class="game-icon"><i class="fas fa-cube"></i></div>
    <div class="game-info">
      <h3>3D Döndürme</h3>
      <p>3D şekilleri doğru açılarla döndürerek uzamsal algı yeteneklerinizi geliştirin.</p>
    </div>
    <a href="{{ url_for('three_d_rotation') }}" class="game-btn">Oyna</a>
    {% if session.get('user_id') %}
    <button class="favorite-btn {% if favorite_games and '3dRotation' in favorite_games %}active{% endif %}" data-game="3dRotation">
      <i class="{% if favorite_games and '3dRotation' in favorite_games %}fas{% else %}far{% endif %} fa-star"></i>
    </button>
    {% endif %}
  </div>
</div>
</section>

<section class="text-center mt-4 mb-4">
  <a href="{{ url_for('all_games') }}" class="btn btn-primary btn-lg">
    <i class="fas fa-gamepad me-2"></i>Daha Çok Oyunlar
  </a>
</section>

<section class="mt-4">
<h2 class="text-center mb-3">Beyin Egzersizinin Faydaları</h2>
<div class="row">
<div class="col-md-4 mb-3">
<div class="card h-100">
<div class="card-body">
<h3 class="card-title"><i class="fas fa-tachometer-alt me-2"></i>Hızlı Düşünme</h3>
<p class="card-text">Düzenli beyin egzersizleri, beyninizin bilgiyi işleme hızını artırarak daha hızlı karar verme ve tepki süresi sağlar.</p>
</div>
</div>
</div>

<div class="col-md-4 mb-3">
<div class="card h-100">
<div class="card-body">
<h3 class="card-title"><i class="fas fa-memory me-2"></i>Gelişmiş Hafıza</h3>
<p class="card-text">Hafıza oyunları, sinir yollarını güçlendirerek kısa ve uzun vadeli hafıza fonksiyonlarını geliştirir.</p>
</div>
</div>
</div>

<div class="col-md-4 mb-3">
<div class="card h-100">
<div class="card-body">
<h3 class="card-title"><i class="fas fa-lightbulb me-2"></i>Problem Çözme</h3>
<p class="card-text">Bulmaca ve örüntü tanıma egzersizleri, durumları analiz etme ve etkili çözümler geliştirme yeteneğinizi artırır.</p>
</div>
</div>
</div>
</div>
</section>

<section class="mt-4 text-center">
<div class="card">
<div class="card-body py-4">
<h2 class="card-title">Beynini Zorlamaya Hazır mısın?</h2>
<p class="card-text mb-3">Hemen beyin egzersizi oyunlarımızı oynamaya başla ve gelişimini takip et.</p>
<a href="{{ url_for('word_puzzle') }}" class="btn btn-primary me-2 mb-2">Oyna</a>
<a href="{{ url_for('leaderboard') }}" class="btn btn-outline-primary mb-2">Skor Tablosu <i class="fas fa-trophy"></i></a>
</div>
</div>
</section>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Favori butonlarına tıklama olayını ekle
  const favoriteButtons = document.querySelectorAll('.favorite-btn');
  
  favoriteButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      const gameType = this.getAttribute('data-game');
      toggleFavorite(gameType, this);
    });
  });
  
  // Favorilere ekleme/çıkarma fonksiyonu
  function toggleFavorite(gameType, buttonElement) {
    // API'ye istek gönder
    fetch('/api/toggle_favorite', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ game_type: gameType })
    })
    .then(response => response.json())
    .then(data => {
      if (data.success) {
        // UI'ı güncelle
        const icon = buttonElement.querySelector('i');
        if (data.message.includes('eklendi')) {
          buttonElement.classList.add('active');
          icon.classList.remove('far');
          icon.classList.add('fas');
        } else {
          buttonElement.classList.remove('active');
          icon.classList.remove('fas');
          icon.classList.add('far');
        }
        
        // Başarı mesajını göster
        alert(data.message);
        
        // Favoriler değiştiğinde sayfayı yenilememiz gerekiyor
        if (data.message.includes('eklendi') || data.message.includes('çıkarıldı')) {
          location.reload();
        }
      } else {
        // Hata mesajını göster
        alert(data.message);
      }
    })
    .catch(error => {
      console.error('Error:', error);
      alert('Bir hata oluştu, lütfen tekrar deneyin.');
    });
  }
});
</script>
{% endblock %}
