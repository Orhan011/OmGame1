{% extends "layout.html" %}

{% block content %}
{% if session.get('user_id') %}
<div class="profile-shortcut-container">
  <div class="profile-shortcut-avatar-wrapper" onclick="toggleShortcutPanel(event)">
    {% if get_avatar_url() %}
      <img src="{{ url_for('static', filename=get_avatar_url()) }}" alt="Profil" class="profile-shortcut-avatar">
    {% else %}
      <div class="profile-shortcut-placeholder">{{ get_user_data().username[0]|upper }}</div>
    {% endif %}
  </div>
  <div class="profile-shortcut-panel" id="shortcutPanel">
    <div class="shortcut-panel-item">
      <a href="{{ url_for('profile_v2') }}">
        <i class="fas fa-user-circle"></i>
        <span>Profilim</span>
      </a>
    </div>
    <div class="shortcut-panel-divider"></div>
    <div class="shortcut-panel-item">
      <a href="{{ url_for('logout') }}">
        <i class="fas fa-sign-out-alt"></i>
        <span>Çıkış Yap</span>
      </a>
    </div>
  </div>
</div>
{% endif %}

<section class="hero-section">
<div class="row align-items-center">
<div class="col-lg-12 text-center position-relative">
<div class="card">
  <h1 class="hero-title"><span>Zekânı Geliştir</span><span>IQ'nu Yükselt</span></h1>
  <p class="hero-subtitle">Bilişsel yeteneklerini geliştiren beyin egzersizi oyunlarımızla kendini zorla.</p>
  <div class="d-flex justify-content-center flex-wrap">
    <a href="{{ url_for('word_puzzle') }}" class="btn btn-primary me-2 mb-2">Hemen Başla</a>
    <a href="{{ url_for('articles') }}" class="btn btn-outline-primary mb-2">Detaylar</a>
  </div>
</div>
</div>
</div>
</section>

<section class="mt-4">
<div class="d-flex justify-content-between align-items-center mb-3">
  <h2 class="mb-0">Favori Oyunlarım</h2>
  {% if session.get('user_id') %}
  <div class="favorite-game-controls">
    <button id="editFavoritesBtn" class="btn btn-sm btn-outline-primary">
      <i class="fas fa-edit"></i> Düzenle
    </button>
  </div>
  {% endif %}
</div>

{% if session.get('user_id') %}
<div id="favoriteGameList" class="game-grid">
  {% if favorite_games %}
    {% for game in favorite_games %}
      <div class="game-card" data-game-type="{{ game.game_type }}">
        <div class="game-icon"><i class="{{ game.icon }}"></i></div>
        <div class="game-info">
          <h3>{{ game.name }}</h3>
          <p>{{ game.description }}</p>
        </div>
        <a href="{{ url_for(game.route) }}" class="game-btn">Oyna</a>
        {% if editing_mode %}
        <button class="remove-favorite-btn" data-game-type="{{ game.game_type }}">
          <i class="fas fa-times"></i>
        </button>
        {% endif %}
      </div>
    {% endfor %}
  {% else %}
    <div class="empty-favorites-message">
      <p>Henüz favori oyunlarınız yok. Tüm oyunlar sayfasından ekleyebilirsiniz.</p>
      <a href="{{ url_for('all_games') }}" class="btn btn-primary mt-2">Oyunları Keşfet</a>
    </div>
  {% endif %}
</div>
{% else %}
<div class="game-grid">
  <!-- Kelime Bulmaca -->
  <div class="game-card">
    <div class="game-icon"><i class="fas fa-font"></i></div>
    <div class="game-info">
      <h3>Kelime Bulmaca</h3>
      <p>Kelimeleri bul, sözcük hazineni genişlet.</p>
    </div>
    <a href="{{ url_for('word_puzzle') }}" class="game-btn">Oyna</a>
  </div>

  <!-- Hafıza Kartları -->
  <div class="game-card">
    <div class="game-icon"><i class="fas fa-clone"></i></div>
    <div class="game-info">
      <h3>Hafıza Kartları</h3>
      <p>Eşleşen kartları bul ve hafızanı test et.</p>
    </div>
    <a href="{{ url_for('memory_cards') }}" class="game-btn">Oyna</a>
  </div>

  <!-- Sudoku -->
  <div class="game-card">
    <div class="game-icon"><i class="fas fa-th"></i></div>
    <div class="game-info">
      <h3>Sudoku</h3>
      <p>Her satır, sütun ve bölgede 1-9 arası rakamları yerleştirin.</p>
    </div>
    <a href="{{ url_for('sudoku') }}" class="game-btn">Oyna</a>
  </div>

  <!-- Wordle -->
  <div class="game-card">
    <div class="game-icon"><i class="fas fa-keyboard"></i></div>
    <div class="game-info">
      <h3>Wordle</h3>
      <p>5 harfli gizli kelimeyi 6 denemede bulmaya çalışın!</p>
    </div>
    <a href="{{ url_for('wordle') }}" class="game-btn">Oyna</a>
  </div>
</div>
{% endif %}
</section>

<section class="text-center mt-4 mb-4">
  <a href="{{ url_for('all_games') }}" class="btn btn-primary btn-lg">
    <i class="fas fa-gamepad me-2"></i>Tüm Oyunlar
  </a>
</section>

<!-- Favori Oyunları Düzenleme Modalı -->
<div class="modal fade" id="editFavoritesModal" tabindex="-1" aria-labelledby="editFavoritesModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="editFavoritesModalLabel">Favori Oyunları Düzenle</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Kapat"></button>
      </div>
      <div class="modal-body">
        <p class="text-muted mb-3">Ana sayfada en fazla 4 favori oyun gösterebilirsiniz.</p>
        <div id="availableGamesList" class="available-games-list">
          <!-- Oyunlar JavaScript ile doldurulacak -->
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Kapat</button>
        <button type="button" class="btn btn-primary" id="saveFavoritesBtn">Kaydet</button>
      </div>
    </div>
  </div>
</div>

<section class="text-center mt-4 mb-4">
  <a href="{{ url_for('all_games') }}" class="btn btn-primary btn-lg">
    <i class="fas fa-gamepad me-2"></i>Daha Çok Oyunlar
  </a>
</section>

<section class="mt-4">
<h2 class="text-center mb-3">Beyin Egzersizinin Faydaları</h2>
<div class="row">
<div class="col-md-4 mb-3">
<div class="card h-100">
<div class="card-body">
<h3 class="card-title"><i class="fas fa-tachometer-alt me-2"></i>Hızlı Düşünme</h3>
<p class="card-text">Düzenli beyin egzersizleri, beyninizin bilgiyi işleme hızını artırarak daha hızlı karar verme ve tepki süresi sağlar.</p>
</div>
</div>
</div>

<div class="col-md-4 mb-3">
<div class="card h-100">
<div class="card-body">
<h3 class="card-title"><i class="fas fa-memory me-2"></i>Gelişmiş Hafıza</h3>
<p class="card-text">Hafıza oyunları, sinir yollarını güçlendirerek kısa ve uzun vadeli hafıza fonksiyonlarını geliştirir.</p>
</div>
</div>
</div>

<div class="col-md-4 mb-3">
<div class="card h-100">
<div class="card-body">
<h3 class="card-title"><i class="fas fa-lightbulb me-2"></i>Problem Çözme</h3>
<p class="card-text">Bulmaca ve örüntü tanıma egzersizleri, durumları analiz etme ve etkili çözümler geliştirme yeteneğinizi artırır.</p>
</div>
</div>
</div>
</div>
</section>

<section class="mt-4 text-center">
<div class="card">
<div class="card-body py-4">
<h2 class="card-title">Beynini Zorlamaya Hazır mısın?</h2>
<p class="card-text mb-3">Hemen beyin egzersizi oyunlarımızı oynamaya başla ve gelişimini takip et.</p>
<a href="{{ url_for('word_puzzle') }}" class="btn btn-primary me-2 mb-2">Oyna</a>
<a href="{{ url_for('leaderboard') }}" class="btn btn-outline-primary mb-2">Skor Tablosu <i class="fas fa-trophy"></i></a>
</div>
</div>
</section>
{% endblock %}