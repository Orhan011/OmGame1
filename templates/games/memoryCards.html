{% extends 'layout.html' %}

{% block title %}Hafıza Kartları - Beyin Egzersizi{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/memory-cards.css') }}">
{% endblock %}

{% block content %}
<div class="container py-4">
  <div class="row">
    <div class="col-12">
      <h1 class="game-title">Hafıza Kartları</h1>
      <p class="game-description">Eşleşen kartları bul ve belleğini güçlendir!</p>
    </div>
  </div>

  <div class="row mb-4">
    <div class="col-md-8">
      <div class="game-options">
        <div class="option-group">
          <label>Zorluk:</label>
          <div class="btn-group" role="group">
            <button id="difficulty-easy" class="btn btn-outline-primary btn-sm active">Kolay (4x4)</button>
            <button id="difficulty-medium" class="btn btn-outline-primary btn-sm">Orta (6x6)</button>
            <button id="difficulty-hard" class="btn btn-outline-primary btn-sm">Zor (8x8)</button>
          </div>
        </div>
        
        <div class="option-group">
          <label>Tema:</label>
          <div class="btn-group" role="group">
            <button id="theme-emoji" class="btn btn-outline-primary btn-sm active">Emoji</button>
            <button id="theme-animals" class="btn btn-outline-primary btn-sm">Hayvanlar</button>
            <button id="theme-icons" class="btn btn-outline-primary btn-sm">İkonlar</button>
          </div>
        </div>
        
        <div class="option-group">
          <label>Oyun Modu:</label>
          <div class="btn-group" role="group">
            <button id="mode-standard" class="btn btn-outline-primary btn-sm active">Standart</button>
            <button id="mode-time" class="btn btn-outline-primary btn-sm">Zamanlı (60 sn)</button>
            <button id="mode-limited" class="btn btn-outline-primary btn-sm">Sınırlı (25 hamle)</button>
          </div>
        </div>
      </div>
    </div>
    
    <div class="col-md-4">
      <div class="game-stats">
        <div class="stat-box">
          <div class="stat-label">Puan</div>
          <div class="stat-value" id="score">0</div>
        </div>
        
        <div class="stat-box">
          <div class="stat-label" id="moves-or-time-label">Hamle</div>
          <div class="stat-value" id="moves-or-time">0</div>
        </div>
        
        <button id="start-game" class="btn btn-primary btn-lg btn-block mt-2">
          <i class="fas fa-play me-2"></i>Oyunu Başlat
        </button>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-12">
      <div class="memory-game-container">
        <div id="game-status-overlay">
          <div class="game-status-content">
            <h2 id="status-message">Oyunu Başlat</h2>
            <p id="status-description">Kartları eşleştirerek puanları topla!</p>
            <button id="overlay-button" class="btn btn-primary btn-lg">Başla</button>
          </div>
        </div>
        
        <div id="memory-game" class="memory-game"></div>
      </div>
    </div>
  </div>

  <div class="row mt-4">
    <div class="col-12">
      <div class="instructions-panel">
        <h3>Nasıl Oynanır?</h3>
        <p>1. İki kart seçin ve eşleşip eşleşmediklerini kontrol edin.</p>
        <p>2. Eşleşen kartlar açık kalır, eşleşmeyenler kapanır.</p>
        <p>3. Tüm kartları eşleştirdiğinizde oyun tamamlanır.</p>
        <p>4. <strong>Zorluk Seviyesi:</strong> Kolay (4x4), Orta (6x6), Zor (8x8) grid seçebilirsiniz.</p>
        <p>5. <strong>Oyun Modu:</strong> Standart (süre sınırı yok), Zamanlı (60 saniye), Sınırlı (25 hamle).</p>
        <p>6. Her doğru eşleşme için 10 puan, her hatalı deneme için -1 puan alırsınız.</p>
      </div>
    </div>
  </div>
</div>

<!-- Başarı Modal -->
<div class="modal fade" id="successModal" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content success-modal">
      <div class="modal-header">
        <h5 class="modal-title">Tebrikler!</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body text-center">
        <div class="success-icon">
          <i class="fas fa-trophy"></i>
        </div>
        <h3 id="final-score-title">Harika İş!</h3>
        <p>Tüm kartları başarıyla eşleştirdin.</p>
        <div class="score-details">
          <div class="detail-row">
            <span>Toplam Puan:</span>
            <span id="final-score">0</span>
          </div>
          <div class="detail-row">
            <span>Toplam Hamle:</span>
            <span id="final-moves">0</span>
          </div>
          <div class="detail-row">
            <span>Geçen Süre:</span>
            <span id="final-time">0:00</span>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Kapat</button>
        <button type="button" class="btn btn-primary" id="play-again">Tekrar Oyna</button>
      </div>
    </div>
  </div>
</div>

<!-- Zaman Bitti Modal -->
<div class="modal fade" id="timeUpModal" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content timeout-modal">
      <div class="modal-header">
        <h5 class="modal-title">Süre Doldu!</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body text-center">
        <div class="timeout-icon">
          <i class="fas fa-hourglass-end"></i>
        </div>
        <h3>Oyun Bitti</h3>
        <p>Süre doldu ama yine de iyi bir skor elde ettin.</p>
        <div class="score-details">
          <div class="detail-row">
            <span>Toplam Puan:</span>
            <span id="timeout-score">0</span>
          </div>
          <div class="detail-row">
            <span>Eşleşen Kartlar:</span>
            <span id="matched-pairs">0</span>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Kapat</button>
        <button type="button" class="btn btn-primary" id="time-up-play-again">Tekrar Oyna</button>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/games/memory_cards.js') }}"></script>
{% endblock %}