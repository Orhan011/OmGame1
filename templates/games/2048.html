{% extends "layout.html" %}

{% block title %}X2 Blocks: 2048 Number Puzzle{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/2048.css') }}">
{% endblock %}

{% block content %}
<div class="container">
  <div class="x2blocks-wrapper">
    <!-- Game Header Section -->
    <div class="x2blocks-header">
      <div class="x2blocks-title">
        <h1>X2 Blocks</h1>
        <div class="x2blocks-subtitle">2048 Number Puzzle</div>
      </div>
      <div class="x2blocks-scores">
        <div class="score-box">
          <div class="score-label">SKOR</div>
          <div class="score-value" id="score">0</div>
        </div>
        <div class="score-box best">
          <div class="score-label">REKOR</div>
          <div class="score-value" id="best-score">0</div>
        </div>
      </div>
    </div>

    <div class="game-status" id="game-status">
      Aynı sayıları birleştirerek <strong>2048</strong> sayısına ulaşmaya çalışın!
    </div>

    <!-- Main Game Grid -->
    <div class="x2blocks-game-container">
      <div class="grid-background" id="grid-container">
        <div class="grid-cell"></div>
        <div class="grid-cell"></div>
        <div class="grid-cell"></div>
        <div class="grid-cell"></div>
        <div class="grid-cell"></div>
        <div class="grid-cell"></div>
        <div class="grid-cell"></div>
        <div class="grid-cell"></div>
        <div class="grid-cell"></div>
        <div class="grid-cell"></div>
        <div class="grid-cell"></div>
        <div class="grid-cell"></div>
        <div class="grid-cell"></div>
        <div class="grid-cell"></div>
        <div class="grid-cell"></div>
        <div class="grid-cell"></div>
      </div>

      <div class="grid-tiles" id="tile-container"></div>

      <!-- Game Message Overlay -->
      <div class="game-message" id="game-message">
        <div class="message-content">
          <p id="message-text"></p>
          <div class="message-buttons">
            <button class="message-button" id="retry-button">
              <i class="fas fa-redo-alt"></i> Tekrar Dene
            </button>
            <button class="message-button" id="keep-playing-button">
              <i class="fas fa-play"></i> Devam Et
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Game Controls -->
    <div class="x2blocks-controls">
      <button class="x2blocks-btn" id="restart-button">
        <i class="fas fa-sync-alt"></i> Yeni Oyun
      </button>
      <button class="x2blocks-btn" id="undo-button" disabled>
        <i class="fas fa-undo"></i> Geri Al
      </button>
    </div>

    <!-- Keyboard Controls Guide -->
    <div class="keyboard-guide">
      <div class="guide-title">Oyunu Klavye ile Oynayın</div>
      <div class="guide-keys">
        <div class="key-row">
          <div class="key">↑</div>
        </div>
        <div class="key-row">
          <div class="key">←</div>
          <div class="key">↓</div>
          <div class="key">→</div>
        </div>
      </div>
    </div>

    <!-- Game Instructions -->
    <div class="x2blocks-instructions">
      <h4><i class="fas fa-question-circle"></i> Nasıl Oynanır?</h4>
      <ul>
        <li><strong>Amaç:</strong> Kareleri birleştirerek 2048 değerine ulaşmak.</li>
        <li><strong>Kontrol:</strong> Ok tuşları ile blokları kaydırın veya dokunmatik ekranda parmağınızla kaydırın.</li>
        <li><strong>Birleşme Kuralı:</strong> Aynı değere sahip iki blok çarpıştığında birleşir ve değerleri ikiye katlanır (2+2=4, 4+4=8...).</li>
        <li><strong>Strateji İpucu:</strong> Büyük sayılarınızı bir köşede tutun ve birleştirme zinciri oluşturun.</li>
        <li><strong>Oyun Sonu:</strong> Tahta dolduğunda ve hareket kalmadığında oyun biter, 2048'e ulaştığınızda kazanırsınız!</li>
      </ul>
    </div>

    <div class="x2blocks-footer">
      <a href="{{ url_for('all_games') }}" class="x2blocks-back-btn">
        <i class="fas fa-arrow-left"></i> Tüm Oyunlara Dön
      </a>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/games/2048.js') }}"></script>
{% endblock %}