<!DOCTYPE html>
<html lang="tr" class="{{ get_user_data().theme_preference if get_user_data() else 'dark' }}">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{% block title %}OmGame - Bilişsel Beceri Oyunları{% endblock %}</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<!-- Temel CSS Dosyaları -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

    <!-- iOS Swipe Navigasyon CSS - Optimizasyon için erken yükleme -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/swipe-navigation.css') }}" media="all">
<link rel="stylesheet" href="{{ url_for('static', filename='css/auth.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/games.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/game-components.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/leaderboard.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/navbar-fixes.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/profile_new.css') }}">

<!-- Favori oyunlar için CSS -->
<style>
.favorite-btn {
  position: absolute;
  top: 10px;
  right: 10px;
  background: transparent;
  border: none;
  color: #ccc;
  font-size: 18px;
  cursor: pointer;
  transition: transform 0.2s, color 0.2s;
  z-index: 2;
}

.favorite-btn:hover {
  transform: scale(1.2);
  color: #f8d568;
}

.favorite-btn.active {
  color: #ffcc00;
}

.favorite-btn i {
  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.5));
}

.favorite-games, .popular-games {
  margin-bottom: 30px;
}

/* Oyun kartları içindeki favori butonu için boşluk */
.game-card {
  position: relative;
  padding-top: 10px;
}

@media (max-width: 768px) {
  .favorite-btn {
    top: 5px;
    right: 5px;
    font-size: 16px;
  }
}
</style>

<!-- Sayfa Özel CSS Dosyaları -->
<!--  Profil CSS dosyası kaldırıldı -->

<script>
document.addEventListener("DOMContentLoaded", function() {
  // Mobil menü için kaydırma özelliğini aktifleştir
  const mobileMenus = document.querySelectorAll('.offcanvas-body');
  if (mobileMenus) {
    mobileMenus.forEach(menu => {
      menu.classList.add('mobile-menu');
    });
  }

  // Offcanvas panelleri için kaydırma özelliğini etkinleştir
  const offcanvasPanels = document.querySelectorAll('.offcanvas');
  if (offcanvasPanels) {
    offcanvasPanels.forEach(panel => {
      panel.style.overflowY = 'auto';
      panel.style.maxHeight = '100vh';
    });
  }

  // Bootstrap dropdown'ları initialize et
  const dropdownElements = document.querySelectorAll('.dropdown-toggle');
  if (dropdownElements.length > 0) {
    dropdownElements.forEach(element => {
      element.addEventListener('click', function(event) {
        event.preventDefault();
        const dropdownMenu = this.nextElementSibling;
        if (dropdownMenu.classList.contains('show')) {
          dropdownMenu.classList.remove('show');
        } else {
          dropdownMenu.classList.add('show');
        }
      });
    });
  }
});
</script>

<!-- Game Manager Entegrasyonu (Tüm Alanlarda Kullanım İçin) -->
<script src="{{ url_for('static', filename='js/gameManager.js') }}" defer></script>

{% block head %}{% endblock %}
</head>
<body class="page-container">

<!-- Mobil Navigasyon -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
<div class="container">
<a class="navbar-brand" href="{{ url_for('index') }}">OmGame</a>
<button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar">
<span class="navbar-toggler-icon"></span>
</button>
<div class="offcanvas offcanvas-end bg-dark" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
<div class="offcanvas-header">
<h5 class="offcanvas-title text-white" id="offcanvasNavbarLabel">OmGame</h5>
<button type="button" class="btn-close bg-light" data-bs-dismiss="offcanvas" aria-label="Close"></button>
</div>
<div class="offcanvas-body">
<ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
<a class="nav-link active" aria-current="page" href="{{ url_for('index') }}">Ana Sayfa</a>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href="#" id="gamesDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
Oyunlar
</a>
<ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="gamesDropdown">
<li><a class="dropdown-item" href="{{ url_for('word_puzzle') }}">Kelime Bulmaca</a></li>
<li><a class="dropdown-item" href="{{ url_for('memory_cards') }}">Hafıza Kartları</a></li>
<li><a class="dropdown-item" href="{{ url_for('labyrinth') }}">Labirent</a></li>
<li><a class="dropdown-item" href="{{ url_for('puzzle') }}">Yapboz</a></li>
<li><a class="dropdown-item" href="{{ url_for('number_sequence') }}">Sayı Dizisi</a></li>
<li><a class="dropdown-item" href="{{ url_for('number_chain') }}">Sayı Zinciri</a></li>
<li><a class="dropdown-item" href="{{ url_for('audio_memory') }}">Sesli Hafıza</a></li>
<li><a class="dropdown-item" href="{{ url_for('n_back') }}">N-Back Test</a></li>
<li><a class="dropdown-item" href="{{ url_for('sudoku') }}">Sudoku</a></li>
<li><a class="dropdown-item" href="{{ url_for('chess') }}">Satranç</a></li>
<li><a class="dropdown-item" href="{{ url_for('three_d_rotation') }}">3D Döndürme</a></li>
<li><hr class="dropdown-divider"></li>
<li><a class="dropdown-item" href="{{ url_for('all_games') }}">Tüm Oyunlar</a></li>
</ul>
</li>
<li class="nav-item">
<a class="nav-link" href="{{ url_for('leaderboard') }}">Skor Tablosu</a>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href="#" id="resourcesDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
Kaynaklar
</a>
<ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="resourcesDropdown">
<li><a class="dropdown-item" href="{{ url_for('articles') }}">Makaleler</a></li>
<li><a class="dropdown-item" href="{{ url_for('tips') }}">İpuçları</a></li>
</ul>
</li>
</ul>
<div class="d-flex">
{% if session.get('user_id') %}
<a href="{{ url_for('profile_v2') }}" class="btn btn-outline-light me-2">Profil</a>
<a href="{{ url_for('logout') }}" class="btn btn-outline-danger">Çıkış</a>
{% else %}
<a href="{{ url_for('login') }}" class="btn btn-outline-light me-2">Giriş</a>
<a href="{{ url_for('register') }}" class="btn btn-primary">Kayıt Ol</a>
{% endif %}
</div>
</div>
</div>
</div>
</nav>

<div class="content-container">
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="container mt-3">
      {% for category, message in messages %}
        <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}

<div class="container mt-3 pb-5">
{% block content %}{% endblock %}
</div>
</div>

<footer class="bg-dark text-white py-4">
<div class="container">
<div class="row">
<div class="col-md-4 col-lg-4 mb-3">
<h5>OmGame</h5>
<p class="text-muted">Bilişsel becerileri geliştiren beyin egzersizi oyunları.</p>
</div>
<div class="col-md-4 col-lg-3 mb-3">
<h5>Bağlantılar</h5>
<ul class="nav flex-column">
<li class="nav-item mb-2"><a href="{{ url_for('index') }}" class="nav-link p-0 text-muted">Ana Sayfa</a></li>
<li class="nav-item mb-2"><a href="{{ url_for('all_games') }}" class="nav-link p-0 text-muted">Oyunlar</a></li>
<li class="nav-item mb-2"><a href="{{ url_for('leaderboard') }}" class="nav-link p-0 text-muted">Skor Tablosu</a></li>
<li class="nav-item mb-2"><a href="{{ url_for('articles') }}" class="nav-link p-0 text-muted">Makaleler</a></li>
</ul>
</div>
<div class="col-md-4 col-lg-3 mb-3">
<h5>Takip Et</h5>
<div class="d-flex gap-3 mt-2">
<a href="#" class="text-muted"><i class="fab fa-facebook-f"></i></a>
<a href="#" class="text-muted"><i class="fab fa-twitter"></i></a>
<a href="#" class="text-muted"><i class="fab fa-instagram"></i></a>
<a href="#" class="text-muted"><i class="fab fa-linkedin-in"></i></a>
</div>
</div>
<div class="col-md-4 col-lg-2 mb-3">
<h5>İletişim</h5>
<ul class="nav flex-column">
<li class="nav-item mb-2 text-muted"><i class="fas fa-envelope me-2"></i> info@omgame.com</li>
<li class="nav-item mb-2 text-muted"><i class="fas fa-phone me-2"></i> +90 500 123 4567</li>
</ul>
</div>
</div>
<hr>
<div class="d-flex justify-content-between align-items-center mt-2 flex-wrap">
<p class="mb-0 text-muted">&copy; 2024 OmGame. Tüm hakları saklıdır.</p>
<ul class="nav">
<li class="nav-item"><a href="#" class="nav-link px-2 text-muted">Gizlilik Politikası</a></li>
<li class="nav-item"><a href="#" class="nav-link px-2 text-muted">Kullanım Koşulları</a></li>
</ul>
</div>
</div>
</footer>

<!-- Bootstrap JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"></script>

<!-- Main JavaScript -->
<script src="{{ url_for('static', filename='js/main.js') }}"></script>

<!-- Ultra-lightweight swipe navigation script -->
<script src="{{ url_for('static', filename='js/swipeNavigation.js') }}" async></script>

{% block scripts %}{% endblock %}
</body>
</html>
